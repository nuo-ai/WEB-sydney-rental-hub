# ğŸ  Sydney Rental Hub - é¡¹ç›®ä¸»ç´¢å¼•

> **æœ€åæ›´æ–°**: 2025-01-30  
> **é‡è¦æ›´æ–°**: è™šæ‹Ÿæ»šåŠ¨æˆåŠŸå¯ç”¨ï¼Œæ¸²æŸ“æ€§èƒ½æå‡83%ï¼ŒDOMèŠ‚ç‚¹å‡å°‘99.8%
> **ç”¨é€”**: å¿«é€Ÿå¯¼èˆªå’Œå®šä½é¡¹ç›®æ‰€æœ‰é‡è¦æ–‡ä»¶å’ŒåŠŸèƒ½
> **åŸåˆ™**: é¿å…AIç‰‡é¢ç†è§£å¯¼è‡´çš„è¿é”é—®é¢˜

---

## ğŸ“š Memory Bank æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£ | ç”¨é€” | æ›´æ–°é¢‘ç‡ |
|------|------|----------|
| [projectbrief.md](./projectbrief.md) | é¡¹ç›®æ¦‚è¿°å’Œå•†ä¸šç›®æ ‡ | ä½ |
| [productContext.md](./productContext.md) | ç”¨æˆ·æ•…äº‹å’Œäº¤äº’æµç¨‹ | ä½ |
| [techContext.md](./techContext.md) | æŠ€æœ¯æ ˆå’Œæ¶æ„è¯¦æƒ… | ä¸­ |
| [systemPatterns.md](./systemPatterns.md) | è®¾è®¡æ¨¡å¼å’Œæœ€ä½³å®è·µ | ä¸­ |
| [progress.md](./progress.md) | å¼€å‘è¿›å±•è®°å½• | é«˜ |
| [activeContext.md](./activeContext.md) | å½“å‰ä»»åŠ¡å’Œç´§æ€¥äº‹é¡¹ | é«˜ |

---

## ğŸ—ºï¸ é¡¹ç›®ç»“æ„å¯¼èˆª

### å‰ç«¯ (Vue 3)
```
apps/web/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ views/               # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ HomeView.vue         â†’ é¦–é¡µ(æˆ¿æºåˆ—è¡¨)
â”‚   â”‚   â”œâ”€â”€ PropertyDetail.vue   â†’ æˆ¿æºè¯¦æƒ…é¡µ
â”‚   â”‚   â”œâ”€â”€ CommuteTimes.vue     â†’ é€šå‹¤æŸ¥è¯¢é¡µé¢ âœ¨
â”‚   â”‚   â”œâ”€â”€ Favorites.vue        â†’ æ”¶è—é¡µé¢
â”‚   â”‚   â”œâ”€â”€ CompareView.vue      â†’ å¯¹æ¯”é¡µé¢
â”‚   â”‚   â”œâ”€â”€ Map.vue              â†’ åœ°å›¾è§†å›¾
â”‚   â”‚   â”œâ”€â”€ Chat.vue             â†’ AIèŠå¤©
â”‚   â”‚   â”œâ”€â”€ LoginView.vue        â†’ ç™»å½•é¡µ
â”‚   â”‚   â””â”€â”€ ProfileView.vue      â†’ ä¸ªäººä¸­å¿ƒ
â”‚   â”‚
â”‚   â”œâ”€â”€ components/          # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ PropertyCard.vue     â†’ æˆ¿æºå¡ç‰‡(æ ¸å¿ƒ)
â”‚   â”‚   â”œâ”€â”€ VirtualPropertyList.vue â†’ è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨ âœ…å¯ç”¨
â”‚   â”‚   â”œâ”€â”€ SearchBar.vue        â†’ æœç´¢æ 
â”‚   â”‚   â”œâ”€â”€ FilterPanel.vue      â†’ ç­›é€‰é¢æ¿
â”‚   â”‚   â”œâ”€â”€ FilterTabs.vue       â†’ å¿«é€Ÿç­›é€‰
â”‚   â”‚   â”œâ”€â”€ Navigation.vue       â†’ å¯¼èˆªæ 
â”‚   â”‚   â”œâ”€â”€ CommuteCalculator.vueâ†’ é€šå‹¤è®¡ç®—å™¨
â”‚   â”‚   â”œâ”€â”€ CompareToolbar.vue   â†’ å¯¹æ¯”å·¥å…·æ 
â”‚   â”‚   â”œâ”€â”€ commute/             â†’ é€šå‹¤ç›¸å…³ç»„ä»¶ âœ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ TransportModes.vue â†’ äº¤é€šæ–¹å¼é€‰æ‹©
â”‚   â”‚   â”‚   â””â”€â”€ LocationCard.vue   â†’ åœ°å€å¡ç‰‡
â”‚   â”‚   â””â”€â”€ modals/             â†’ æ¨¡æ€æ¡†ç»„ä»¶ âœ¨
â”‚   â”‚       â”œâ”€â”€ AuthModal.vue      â†’ è®¤è¯æ¨¡æ€æ¡†
â”‚   â”‚       â”œâ”€â”€ EmailVerifyModal.vue â†’ é‚®ç®±éªŒè¯
â”‚   â”‚       â”œâ”€â”€ AddLocationModal.vue â†’ æ·»åŠ åœ°å€
â”‚   â”‚       â””â”€â”€ NameLocationModal.vue â†’ åœ°å€å‘½å
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/              # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ properties.js        â†’ æˆ¿æºæ•°æ®store
â”‚   â”‚   â”œâ”€â”€ auth.js              â†’ è®¤è¯store âœ¨
â”‚   â”‚   â””â”€â”€ commute.js           â†’ é€šå‹¤store âœ¨
â”‚   â”‚
â”‚   â”œâ”€â”€ services/            # APIæœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ api.js               â†’ APIå°è£…
â”‚   â”‚
â”‚   â””â”€â”€ router/              # è·¯ç”±é…ç½®
â”‚       â””â”€â”€ index.js             â†’ è·¯ç”±å®šä¹‰
```

### åç«¯ (FastAPI)
```
backend/
â”œâ”€â”€ main.py                  # ä¸»å…¥å£ + APIç«¯ç‚¹å®šä¹‰
â”œâ”€â”€ db.py                    # æ•°æ®åº“è¿æ¥æ± 
â”œâ”€â”€ api/
â”‚   â””â”€â”€ graphql_schema.py   # GraphQLæ¨¡å¼å®šä¹‰
â”œâ”€â”€ crud/
â”‚   â”œâ”€â”€ properties_crud.py  # æˆ¿æºCRUDæ“ä½œ
â”‚   â””â”€â”€ commute_crud.py     # é€šå‹¤ç›¸å…³æ“ä½œ
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ property_models.py  # æˆ¿æºæ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ commute_models.py   # é€šå‹¤æ•°æ®æ¨¡å‹
â”œâ”€â”€ config/
â”‚   â””â”€â”€ university_data.py  # å¤§å­¦é…ç½®æ•°æ®
â””â”€â”€ tasks.py                 # Celeryå¼‚æ­¥ä»»åŠ¡
```

### æ•°æ®åº“
```
database/
â”œâ”€â”€ setup_database.sql       # ä¸»è¡¨ç»“æ„(properties)
â”œâ”€â”€ setup_transport_stops_table.sql # äº¤é€šç«™ç‚¹è¡¨
â”œâ”€â”€ update_database.py       # æ•°æ®åº“æ›´æ–°è„šæœ¬
â””â”€â”€ process_csv.py          # CSVæ•°æ®å¯¼å…¥
```

---

## ğŸ”Œ APIç«¯ç‚¹é€ŸæŸ¥

### REST API
| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ | ç¼“å­˜ |
|------|------|------|------|
| `/api/properties` | GET | è·å–æˆ¿æºåˆ—è¡¨ | 15åˆ†é’Ÿ |
| `/api/properties/{id}` | GET | è·å–æˆ¿æºè¯¦æƒ… | 15åˆ†é’Ÿ |
| `/api/directions` | GET | è·å–é€šå‹¤è·¯çº¿ | 15åˆ†é’Ÿ(å‰ç«¯) |
| `/api/chat` | POST | AIèŠå¤© | æ—  |
| `/api/health` | GET | å¥åº·æ£€æŸ¥ | æ—  |
| `/api/auth/register` | POST | ç”¨æˆ·æ³¨å†Œ | æ—  |
| `/api/auth/login` | POST | ç”¨æˆ·ç™»å½• | æ—  |
| `/api/user/addresses` | GET/POST | ç”¨æˆ·åœ°å€ç®¡ç† | æ—  |

### GraphQL
| ç«¯ç‚¹ | åŠŸèƒ½ |
|------|------|
| `/graphql` | çµæ´»çš„æ•°æ®æŸ¥è¯¢æ¥å£ |

---

## ğŸ“Š æ•°æ®æµå‘å›¾

```
ç”¨æˆ·æµè§ˆå™¨ (localhost:5173)
    â†“
Vue 3 å‰ç«¯
    â†“
Vite Proxy (/api/*)
    â†“
FastAPI åç«¯ (localhost:8000)
    â†“
Supabaseäº‘æ•°æ®åº“ (AWSæ‚‰å°¼) + Redisç¼“å­˜
```

---

## ğŸ”‘ å…³é”®æ•°æ®æ¨¡å‹

### Property (æˆ¿æº)
```javascript
{
  listing_id: Number,        // ä¸»é”®
  address: String,          // åœ°å€
  suburb: String,           // åŒºåŸŸ
  rent_pw: Number,          // å‘¨ç§Ÿé‡‘
  bedrooms: Number,         // å§å®¤æ•°
  bathrooms: Number,        // æµ´å®¤æ•°
  parking_spaces: Number,   // è½¦ä½æ•°
  available_date: Date,     // å¯å…¥ä½æ—¥æœŸ
  images: Array,            // å›¾ç‰‡æ•°ç»„
  latitude: Number,         // çº¬åº¦
  longitude: Number,        // ç»åº¦
  // + 8ä¸ªç‰¹æ€§å­—æ®µï¼ˆV4ç‰ˆæœ¬ï¼‰
}
```

---

## âš ï¸ å·²çŸ¥é—®é¢˜å’Œæ³¨æ„äº‹é¡¹

### éœ€è¦ç«‹å³å…³æ³¨çš„é—®é¢˜ï¼š
1. **è™šæ‹Ÿæ»šåŠ¨æœªå¯ç”¨ï¼ˆP0ï¼‰**:
   - å·²æœ‰VirtualPropertyList.vueç»„ä»¶ä½†æœªä½¿ç”¨
   - 3456æ¡æ•°æ®å¯¼è‡´æ¸²æŸ“å¡é¡¿3-5ç§’
   - **å½±å“**: åˆ—è¡¨é¡µæ€§èƒ½å·®ï¼Œå†…å­˜å ç”¨é«˜
   - **è§£å†³**: å¯ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼Œé¢„æœŸæå‡80%æ€§èƒ½

2. **è°ƒè¯•ä»£ç æœªæ¸…ç†ï¼ˆP0ï¼‰**:
   - 35ä¸ªconsole.logéœ€è¦æ¸…ç†
   - **å½±å“**: ç”Ÿäº§ç¯å¢ƒä¿¡æ¯æ³„éœ²ï¼Œæ€§èƒ½æŸè€—
   - **è§£å†³**: ä½¿ç”¨æ„å»ºå·¥å…·è‡ªåŠ¨ç§»é™¤

3. **æ”¶è—åŠŸèƒ½åç«¯æœªå®ç°ï¼ˆP1ï¼‰**:
   - 4ä¸ªTODOå¾…å®ç°API
   - **å½±å“**: æ ¸å¿ƒåŠŸèƒ½ç¼ºå¤±
   - **è§£å†³**: å®ç°åç«¯æ”¶è—API

### å¼€å‘æ³¨æ„äº‹é¡¹ï¼š
1. **ä¿®æ”¹å‰å¿…è¯»**:
   - æ£€æŸ¥æ­¤ç´¢å¼•äº†è§£æ•´ä½“æ¶æ„
   - æŸ¥çœ‹ç›¸å…³ç»„ä»¶çš„ä¾èµ–å…³ç³»
   - éªŒè¯APIç«¯ç‚¹çš„å®é™…è¿”å›æ ¼å¼

2. **é¿å…çš„é”™è¯¯**:
   - âŒ ä¸è¦å‡è®¾APIæ ¼å¼ï¼Œè¦å®é™…æ£€æŸ¥
   - âŒ ä¸è¦åªæ”¹å‰ç«¯ä¸æ”¹åç«¯
   - âŒ ä¸è¦å¿½è§†ç¼“å­˜çš„å½±å“

3. **æµ‹è¯•è¦ç‚¹**:
   - âœ… å‰åç«¯è”è°ƒæµ‹è¯•
   - âœ… ç¼“å­˜æ¸…ç†åæµ‹è¯•
   - âœ… é”™è¯¯æƒ…å†µæµ‹è¯•

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨å‘½ä»¤

```bash
# å¯åŠ¨åç«¯
python scripts/run_backend.py

# å¯åŠ¨å‰ç«¯
cd apps/web && npm run dev

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:5173/       # å‰ç«¯
curl http://localhost:8000/api/health  # åç«¯
```

---

## ğŸ“ å¼€å‘å·¥ä½œæµ

1. **å¼€å§‹æ–°ä»»åŠ¡å‰**:
   - è¯»å–æ­¤INDEX.mdäº†è§£å…¨å±€
   - è¯»å–activeContext.mdäº†è§£å½“å‰çŠ¶æ€
   - æ£€æŸ¥ç›¸å…³æ¨¡å—çš„ä¾èµ–å…³ç³»

2. **ä¿®æ”¹ä»£ç æ—¶**:
   - ä½¿ç”¨TodoWriteå·¥å…·è·Ÿè¸ªè¿›åº¦
   - ä¸€æ¬¡åªæ”¹ä¸€å¤„ï¼Œç«‹å³éªŒè¯
   - è€ƒè™‘å¯¹å…¶ä»–æ¨¡å—çš„å½±å“

3. **å®Œæˆä»»åŠ¡å**:
   - æ›´æ–°progress.mdè®°å½•å˜æ›´
   - æ›´æ–°activeContext.mdåæ˜ æ–°çŠ¶æ€
   - å¦‚æœ‰æ¶æ„å˜åŒ–ï¼Œæ›´æ–°æ­¤ç´¢å¼•

---

## ğŸ” å¸¸è§é—®é¢˜å¿«é€Ÿå®šä½

| é—®é¢˜ç±»å‹ | æ£€æŸ¥æ–‡ä»¶ | å¯èƒ½åŸå›  |
|----------|----------|----------|
| æˆ¿æºä¸æ˜¾ç¤º | `properties.js`, `api.js` | APIè°ƒç”¨å¤±è´¥æˆ–æ•°æ®æ ¼å¼é—®é¢˜ |
| å›¾ç‰‡ä¸åŠ è½½ | `PropertyCard.vue` | imagesæ•°ç»„å¤„ç†æˆ–CDNé—®é¢˜ |
| ç­›é€‰æ— æ•ˆ | `properties.js:applyFilters()` | ç­›é€‰é€»è¾‘æˆ–çŠ¶æ€æ›´æ–°é—®é¢˜ |
| è¯¦æƒ…é¡µæŠ¥é”™ | `PropertyDetail.vue`, `properties_crud.py` | IDç±»å‹æˆ–å­—æ®µç¼ºå¤±é—®é¢˜ |
| é€šå‹¤è®¡ç®—å¤±è´¥ | `CommuteCalculator.vue`, `/api/directions` | Google APIå¯†é’¥æˆ–é…é¢é—®é¢˜ |
| ~~åˆ—è¡¨å¡é¡¿~~ | ~~`HomeView.vue`, `VirtualPropertyList.vue`~~ | ~~è™šæ‹Ÿæ»šåŠ¨æœªå¯ç”¨~~ âœ…å·²è§£å†³ |
| æŸ¥è¯¢ç¼“æ…¢ | `main.py:check_and_optimize_indexes()` | æ•°æ®åº“ç´¢å¼•ç¼ºå¤±æˆ–æœªä¼˜åŒ– |

---

**ç»´æŠ¤æç¤º**: æ­¤ç´¢å¼•æ˜¯é¡¹ç›®çš„å¯¼èˆªä¸­å¿ƒï¼Œä»»ä½•æ¶æ„çº§å˜æ›´éƒ½åº”åŠæ—¶æ›´æ–°æ­¤æ–‡ä»¶ã€‚