# 📐 开发规则手册 (Development Rules)

> 本文档记录所有开发过程中的重要决策和规则，确保团队一致性  
> 最后更新：2025-01-30

---

## 🎯 核心原则

### 1. TODO管理原则
- **讨论 ≠ TODO**：讨论的建议先进入Ideas，评估后才成为TODO
- **P0极简原则**：P0仅限阻塞性问题，不包含优化
- **先评估后实施**：使用决策模板评分，理性决策

### 2. 代码注释原则
- **只解释"为什么"，不解释"什么"** 
- 业务逻辑 > 代码逻辑
- 参见：CODE_COMMENT_RULES.md

### 3. 提交原则
- **永不自动提交**：只有用户明确要求时才git commit
- **清理优先**：提交前运行lint和typecheck
- **语义化信息**：使用feat/fix/refactor等前缀

---

## ⚠️ 开发禁忌 (Never Do)

1. ❌ **不要把讨论建议直接列为P0任务**
2. ❌ **不要自动创建文档文件（除非用户要求）**
3. ❌ **不要在代码中添加"什么"类型的注释**
4. ❌ **不要未经用户同意就git commit**
5. ❌ **不要创建新文件when可以编辑现有文件**
6. ❌ **不要使用emoji除非用户要求**

---

## ✅ 开发检查清单 (Always Do)

### 开始任务前
- [ ] 检查 DEVELOPMENT_RULES.md（本文档）
- [ ] 查看 TODO.md 确认优先级
- [ ] 运行测试确保环境正常

### 编写代码时
- [ ] 遵循现有代码风格
- [ ] 只添加"为什么"的注释
- [ ] 使用项目已有的库，不引入新依赖
- [ ] **遵循 FRONTEND_STYLE_GUIDE.md 样式规范**

### 完成任务后
- [ ] 运行 `npm run lint`
- [ ] 运行 `npm run typecheck`（如果有）
- [ ] 更新 TODO.md 状态
- [ ] 等待用户确认后才提交

---

## 📝 历史决策记录

### 2025-01-30：TODO管理流程改革
**问题**：讨论的建议被直接列为P0优先级  
**决策**：建立 Ideas → 评估 → TODO 的三段式流程  
**影响**：所有新建议先进入Ideas区域

### 2025-01-30：代码注释规范确立
**问题**：注释过多，解释显而易见的代码  
**决策**：只保留"为什么"的注释，删除"什么"的注释  
**影响**：代码更清晰，维护性更好

### 2025-01-30：UI一致性规范确立
**问题**：UI缺乏统一性，评分仅14/40  
**决策**：建立FRONTEND_STYLE_GUIDE.md作为强制规范  
**影响**：所有新组件必须遵循，旧组件逐步改进

### 2025-01-29：筛选功能架构决策
**问题**：本地筛选vs服务端筛选  
**决策**：使用服务端筛选，保证数据完整性  
**影响**：性能略降但数据准确

---

## 🔧 工具配置

### VSCode必装插件
- **Todo Tree**：TODO管理（已配置）
- **ESLint**：代码规范
- **Prettier**：代码格式化

### Git Hooks（建议）
```bash
# pre-commit hook
npm run lint
npm run typecheck
```

---

## 📊 规则执行统计

| 规则 | 遵守次数 | 违反次数 | 遵守率 |
|------|---------|---------|--------|
| 不自动提交 | 15 | 0 | 100% |
| 只写why注释 | 12 | 3 | 80% |
| Ideas先评估 | 2 | 1 | 67% |

---

## 🚨 快速参考

遇到以下情况时的标准做法：

**Q: 用户报告了bug或提出优化建议**  
A: 记录到Ideas → 使用决策模板评估 → 决定优先级

**Q: 要添加新功能**  
A: 检查现有代码风格 → 复用已有组件 → 只添加why注释

**Q: 完成了代码修改**  
A: 运行lint → 更新TODO状态 → 等用户要求才commit

**Q: 不确定某个决策**  
A: 查看本文档 → 查看历史决策 → 询问用户

---

*提示：将此文档设为书签，每次开发前快速浏览*