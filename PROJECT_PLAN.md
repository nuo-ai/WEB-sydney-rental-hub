# JUWO 桔屋找房 - MVP 冲刺计划

**项目总监**: Cline

**目标**: 根据项目现状与核心决策，将 JUWO 项目从当前状态推进到第一版可交付产品 (MVP)。

---

## 阶段 0: 准备与奠基 (预计 1 周)

- **目标**: 确保所有工具、环境和核心资产准备就绪。
- **关键成果**:
  - **详细的后端迁移计划**:
    1.  **API 契约审查**: 确认 `API_ENDPOINTS.md` 与前端核心需求完全对齐。
    2.  **数据库模型对齐**: 验证 `models/*.py` 与数据库 schema 一致。
    3.  **环境变量标准化**: 在 `.env.example` 中记录所有必需的环境变量。
  - **Storybook 基础组件最终确认**:
    1.  **组件审查**: 确认 `packages/ui` 中的基础组件 (Button, Card, Input 等) 符合设计规范。
    2.  **Chromatic 基线**: 为所有基础组件建立视觉回归测试基线。
  - **项目管理初始化**:
    1.  **任务拆分**: 在项目管理工具中创建史诗 (Epics) 和用户故事 (User Stories)。
    2.  **技术债务追踪**: 将已知技术债务 (如 `TODO` 注释) 记录到积压 (Backlog) 中。
- **需识别的风险**:
  - **API 契约不匹配**: 如果后端 API 与前端需求不符，将导致后期返工。
  - **组件库不完善**: 基础组件的缺失或不稳定会阻塞前端开发。

---

## 阶段 1: 后端迁移与核心服务稳定 (预计 1-2 周)

- **目标**: 完成 FastAPI 后端的迁移与重构，提供稳定可靠的数据接口。
- **关键成果**:
  - **后端服务在 Monorepo 中可独立运行**:
    1.  `pnpm --filter @web-sydney/backend dev` 可以成功启动服务。
    2.  所有单元测试 (`pytest .`) 通过。
  - **核心 API 100% 符合新 API 契约**:
    1.  `GET /api/properties` 及其所有筛选/排序/分页参数功能正常。
    2.  `GET /api/properties/{id}` 功能正常。
    3.  `POST /api/auth/register` 和 `POST /api/auth/login` 功能正常。
  - **部署到开发环境**:
    1.  在开发服务器上部署后端服务。
    2.  前端可以从开发环境调用后端 API。
- **需识别的风险**:
  - **数据库迁移问题**: 现有数据与新模型的兼容性问题。
  - **性能瓶颈**: 高并发下的 API 性能问题。

---

## 阶段 2: 核心用户流程重构 (预计 2-3 周)

- **目标**: 在新的 `apps/vue-juwo` 前端应用中，高质量地重现并优化三个核心页面。
- **关键成果**:
  - **可交互的房源列表页**:
    1.  对接 `GET /api/properties` API。
    2.  使用 `shadcn-vue` 组件构建 UI。
  - **可交互的房源详情页**:
    1.  对接 `GET /api/properties/{id}` API。
    2.  展示所有房源详情。
  - **可交互的通勤计算页面**: (如果需要)
    1.  对接 `/api/directions`。
  - **人工验证点**:
    1.  **Pinia Store 规范**: 审查 Pinia store 的代码，确保所有状态修改都通过 actions 完成。
    2.  **组件化规范**: 验证 UI 是否严格使用 `packages/ui` 中的组件。
- **需识别的风险**:
  - **前端性能问题**: 大量数据渲染时的性能瓶颈。
  - **UI/UX 偏差**: `shadcn-vue` 默认样式与项目设计规范的差异。

---

## **附录 A: 前端重塑计划 (apps/vue-juwo)**

- **目标**: 在 `apps/vue-juwo` 中引入 `shadcn-vue` 和 `tailwindcss`，并建立一个可扩展的前端架构。

- **关键步骤**:
  1.  **安装依赖**:
      - `tailwindcss`, `postcss`, `autoprefixer`
      - `shadcn-vue`, `class-variance-authority`, `clsx`, `tailwind-merge`
      - `lucide-vue-next` (图标库)
  2.  **配置文件初始化**:
      - `tailwind.config.js`: 配置 `content`, `theme`, 和 `plugins`。
      - `postcss.config.js`: 集成 `tailwindcss` 和 `autoprefixer`。
      - `components.json`: `shadcn-vue` 的配置文件。
  3.  **全局样式与字体**:
      - 创建 `src/assets/css/tailwind.css`，并引入 `tailwindcss` 的基础、组件和工具样式。
      - 在 `main.ts` 中引入全局样式。
  4.  **引入第一个组件**:
      - 使用 `shadcn-vue` CLI 添加一个基础组件 (例如 `Button`)。
      - 在 `App.vue` 中使用该组件，验证所有配置是否正确。
  5.  **建立目录结构**:
      - `src/components/ui`: 由 `shadcn-vue` 管理的 UI 组件。
      - `src/components/shared`: 可在整个应用中复用的业务组件。
      - `src/views`: 页面级组件。
      - `src/router`: Vue Router 配置。
      - `src/store`: Pinia store 模块。
      - `src/lib/utils.ts`: `shadcn-vue` 的工具函数。
- **需识别的风险**:
  - **样式冲突**: 如果未来引入其他 UI 库，可能会有样式冲突。
  - **打包体积**: 引入 `tailwindcss` 和组件库会增加最终的打包体积。

---

## 阶段 3: 功能扩展与 MVP 闭环 (预计 2 周)

- **目标**: 完成 MVP 所需的剩余关键功能，形成业务闭环。
- **关键成果**:
  - **用户认证流程**:
    1.  实现登录、注册页面。
    2.  集成 JWT 认证，保护用户路由。
  - **房源收藏功能**:
    1.  实现房源的收藏/取消收藏。
    2.  提供用户收藏列表页面。
  - **基础的筛选功能**:
    1.  实现基于价格、卧室数量、区域的筛选。
    2.  修复旧版筛选功能的所有已知缺陷。
- **需识别的风险**:
  - **状态管理复杂性**: 用户认证状态与全局筛选状态的管理。
  - **跨设备体验不一致**: 在不同设备上的 UI/UX 表现。

---

## 阶段 4: 测试、部署与发布 (预计 1 周)

- **目标**: 确保产品质量，并将其部署到生产环境。
- **关键成果**:
  - **端到端测试用例覆盖**:
    1.  使用 Playwright 编写覆盖核心用户路径的测试用例。
    2.  所有 E2E 测试在 CI 中通过。
  - **生产环境部署流水线**:
    1.  配置 CI/CD 流程，实现自动化部署。
    2.  成功将前后端应用部署到生产环境。
  - **Alpha/Beta 测试报告**:
    1.  邀请内部用户进行 Alpha 测试。
    2.  根据反馈进行快速迭代和修复。
- **需识别的风险**:
  - **生产环境配置错误**: 数据库、缓存等生产环境配置问题。
  - **性能问题**: 在生产环境下的真实负载性能问题。
