# 悉尼租房平台 - Cline Rules

## 🏗️ 项目架构规则

### 技术栈约束
- **前端**: 使用 Vanilla JavaScript + TailwindCSS，避免引入新框架
- **后端**: 保持现有 FastAPI + GraphQL 架构不变
- **样式**: 优先使用 TailwindCSS 类，自定义 CSS 放在 `<style>` 标签内
- **依赖**: 只使用已验证的外部库（noUiSlider, Font Awesome, Google Maps API）

### 文件结构规范
```
frontend/
├── index.html (主页)
├── details.html (房源详情)
├── saved.html (收藏页面)
├── scripts/
│   ├── main.js (主逻辑)
│   ├── details.js (详情页逻辑)
│   └── config.js (配置文件)
└── functions/ (Netlify Functions)
```

## 📱 响应式设计规则

### 断点系统
- **移动端**: < 768px (单列布局)
- **平板端**: 768px - 1024px (双列布局)
- **桌面端**: > 1024px (三列布局)

### 移动端优先
- 所有新功能必须先在移动端测试
- 触摸区域最小 44px × 44px
- 文字最小 16px（避免缩放）

## 🎨 UI/UX 规则

### 设计一致性
- 保持现有的色彩系统（textPrimary, textSecondary, accentPrimary 等）
- 使用统一的圆角系统（8px, 12px, 16px）
- 保持现有的阴影和间距系统

### 交互规范
- 所有按钮必须有 hover 和 active 状态
- 加载状态必须有视觉反馈
- 错误状态必须有用户友好的提示

## 🔧 开发规则

### 代码质量
- **函数命名**: 使用驼峰命名法，功能明确
- **变量命名**: 避免缩写，使用描述性名称
- **注释**: 复杂逻辑必须添加中文注释
- **错误处理**: 所有 API 调用必须有 try-catch

### API 集成
- 使用现有的 `config.js` 中的 API_URL
- 所有 API 调用使用 async/await
- 实现统一的错误处理机制
- API 响应必须验证数据结构

## 🧪 测试规则

### 开发验收流程
- **完成即报告**: 代码修改完成后直接报告完成，不启动浏览器测试
- **用户验收**: 用户会截图反馈问题，开发者根据截图分析和修复
- **避免浏览器测试**: 开发者无法有效看到问题，依赖用户反馈

### 浏览器兼容性
- **必须支持**: Chrome, Safari, Firefox, Edge (最新2个版本)
- **移动端**: iOS Safari, Android Chrome
- **测试**: 每个功能在所有支持的浏览器中验证

### 功能测试
- 每个新功能必须在3种屏幕尺寸下测试
- 图片轮播必须支持触摸滑动
- 筛选功能必须实时更新结果

## 📊 性能规则

### 加载性能
- 页面首次加载时间 < 3秒
- 图片使用懒加载
- API 调用添加缓存机制
- 避免不必要的重新渲染

### 用户体验
- 所有交互响应时间 < 100ms
- 滚动必须流畅（60fps）
- 避免布局抖动

## 🔒 安全规则

### 数据处理
- 所有用户输入必须验证和清理
- API 密钥不能暴露在前端代码中
- 使用 HTTPS 进行所有 API 调用

### 用户数据
- 敏感信息不存储在 localStorage
- JWT token 安全存储和管理
- 实现适当的会话超时

## 📝 文档规则

### 代码文档
- 每个主要功能模块添加功能说明注释
- API 调用添加参数和返回值说明
- 复杂算法添加实现思路注释

### 变更记录
- 重要修改更新 memory-bank 文档
- 新功能添加到功能清单
- Bug 修复记录问题和解决方案

## 🚫 禁止事项

### 技术限制
- 不引入新的 JavaScript 框架
- 不修改后端 API 结构
- 不使用实验性 CSS 特性
- 不添加不必要的动画效果

### 开发限制
- 不直接修改 Old/ 目录中的文件
- 不删除现有的功能代码
- 不破坏现有的 API 集成
- 不忽略响应式设计要求

## 🎯 当前项目特定规则

### Old 版本优化策略
- 基于现有的完整功能代码进行响应式改造
- 移除 APP 框架元素（393×852px 固定容器）
- 保持所有现有功能（图片轮播、筛选、收藏、UIEnhancer）
- 优先移动端适配，然后扩展到桌面端

### 7天开发计划约束
- 每日必须完成指定的里程碑
- 功能完整性优先于视觉完美
- 保持现有代码逻辑不变
- 专注响应式布局改造
