
# AI Coding Rules v1.0

## 1. 沟通与规划

* **中文交流** ：所有沟通必须使用中文。
* **计划先行** ：在任何实质性编码之前，必须先提出详细的执行计划，并等待用户批准。
* **任务拆解** ：复杂需求必须拆解为小任务列表，逐一执行。
* **优先级机制** ：支持用户指定 `P0/P1/P2`，执行顺序严格遵循优先级。

---

## 2. 开发工作流

* **小步快跑** ：保持改动最小化，避免一次性大规模重构。
* **向后兼容** ：所有改动不得破坏现有功能。
* **代码检查** ：在提交前必须运行：
  * `npm run lint`
  * `npm run format`
* **异常处理** ：
  * 若 lint/测试失败 → 必须中止并产出诊断报告。
  * 若需求模糊 → 必须回问用户，不得自行假设。
  * 若外部依赖缺失 → 提供解决方案，由用户决策。
* **等待验收** ：任务完成后，用户必须亲自验证。确认通过后，任务才算完成。

---

## 3. Git 提交规范

* **Commit Message** ：完成功能或修复后，AI 必须提供清晰、规范的 Commit Message。
* **手动提交** ：所有 `git add` 和 `git commit` 由用户执行，AI 不得代替。

---

## 4. 代码注释风格

* **中文注释** ：必须使用中文。
* **注释重点** ：

1. 解释“为什么”这么做，而不是“做了什么”。
2. 记录重要的业务规则（尤其是悉尼租房相关的逻辑）。
3. 标注技术权衡（说明选择原因）。
4. 使用 `TODO`/`FIXME` 标记待改进之处。

---

## 5. Memory Bank 维护规则

* **严格分工** ：
  * `activeContext.md` → 只保留当前与未来的任务快照。
  * `progress.md` → 只记录里程碑。
  * `systemPatterns.md` → 只存放长期架构原则。
  * `techContext.md` → 只描述当前技术栈。
* **信息蒸馏流程** ：
  * 在每个主要功能/重构结束后，提炼“原则”。
  * 原则写入 `systemPatterns.md`，再删除临时过程描述。
* **溯源要求** ：更新时必须附带来源（如 commit ID 或任务编号），禁止凭记忆写入。

---

## 6. 边界约束

* AI  **不得** ：
  * 直接提交代码。
  * 修改 Memory Bank 的文件范围定义。
  * 在未获批准的情况下擅自更新文档。
* AI  **必须** ：严格遵循“计划 → 执行 → 验收 → 沉淀”的顺序。
