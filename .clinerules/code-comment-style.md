## Brief overview
- 项目级“代码注释风格”规范，适用于前后端所有代码文件
- 目标：让后来者快速理解“为什么”与“关键业务规则”，而非机械复述“做了什么”
- 严格要求中文注释；必要时用简单中文解释英文术语的前端表现/业务含义

## Comment language and focus
- 统一使用中文注释，简明准确
- 注释重点放在“为什么”与“业务规则/权衡”，而非“代码做了什么”
- 出现英文名词/第三方术语时，补一句通俗的“前端实际表现/对用户的影响”说明

## What to document (必须写)
- 业务规则（悉尼租房相关）
  - 列表筛选与排序口径（示例：suburb ILIKE、bedrooms CSV+下限语义、sort 白名单等）
  - 缓存与分页口径（示例：列表与计数一致性、cursor/page 边界）
  - 契约假设（示例：API 参数白名单、错误码约定）
- 技术权衡（Trade-offs）
  - 选择某实现/库/结构的原因及取舍（性能、可维护性、框架兼容、易用性）
  - 暂未覆盖的边界与后续打算（指明哪里可扩展）
- 跨模块契约
  - 函数/组件/接口之间的输入输出约束、前置条件、不可违背的约束
- 关键副作用与风险
  - 改动会影响的全局状态、缓存、网络请求频率、可访问性/SEO、移动端性能等

## Where to place comments
- 文件头部：简述该文件承担的“领域职责”与核心业务规则
- 模块/函数头部：说明“为什么这样设计/实现”，传参与返回值的关键约束
- 复杂逻辑处（if/loop/SQL/正则/状态机）：解释“选择该逻辑的原因与边界”
- 公共组件/工具函数：标注使用场景、与业务的耦合点、对 UX 的影响

## Tags and formatting
- 使用标准标记
  - TODO: 后续要补充/优化的点（含简短动机或预期方案）
  - FIXME: 已知缺陷/风险，需要修复并说明影响范围
- 业务规则标记（可选）
  - // 业务规则：说明…（示例：日期筛选包含 available_date IS NULL 的口径）
- 技术权衡标记（可选）
  - // 权衡：为何选 A 而非 B（性能/易用/一致性/依赖约束）

## Examples
- 函数头注释（解释“为什么”）
  ```ts
  // 业务规则：列表总数与分页累加一致；排序仅允许白名单值
  // 为什么：统一前后端数据口径，避免 GraphQL/REST 计数不一致导致的 UX 偏差
  // 权衡：为保障可维护性，拒绝动态字段排序；后续如需扩展，增加白名单并补测试
  function buildListQuery(params: ListParams) { … }
  ```
- 复杂逻辑内联注释
  ```ts
  // 为什么：当 date_from <= today 时，视为“可立即入住”，包含 available_date IS NULL
  // 业务规则：未来区间不包含 NULL，避免误导
  if (isFromBeforeToday) { … } else { … }
  ```
- TODO/FIXME
  ```ts
  // TODO: 支持 price_desc 排序 — 待确认对现有缓存键的影响
  // FIXME: bcrypt 版本兼容性问题导致长密码报错，已临时锁定 3.2.0，待统一依赖策略
  ```

## When not to comment
- 避免“翻译式注释”（重复表达代码字面含义）
- 避免对显而易见的语句逐行注释
- 避免与代码行为不一致的陈旧注释（修改时同步更新或删除）

## Review checklist (提交前自检)
- 是否用中文清楚解释了“为什么”与“业务规则/权衡”
- 新增/修改的业务逻辑是否补充了边界与副作用说明
- 涉及悉尼租房领域规则的地方，是否写明口径与来源（且与后端契约一致）
- 是否用 TODO/FIXME 标注了后续改进点与已知问题
- 是否避免了冗余或过时注释

## Notes for frontend UX (移动端优先的补充)
- 出现英文术语/库名时，附一句“对前端表现/用户影响”的中文描述
- 典型流程（如品牌页 → 列表页）：注释中说明“自动跳转兜底的原因”“按钮交互的期望反馈”
