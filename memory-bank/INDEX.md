# ğŸ  Sydney Rental Hub - é¡¹ç›®ä¸»ç´¢å¼•

> **æœ€åæ›´æ–°**: 2025-09-03 (Memory Bankå®Œæˆå…¨é¢ç²¾ç®€)
> **é‡è¦æ›´æ–°**: è™šæ‹Ÿæ»šåŠ¨æˆåŠŸå¯ç”¨ï¼Œæ¸²æŸ“æ€§èƒ½æå‡83%; Memory Bankæ–‡ä»¶ç²¾ç®€å®Œæˆ; PC è¯¦æƒ…é¡µæ ·å¼ç»Ÿä¸€ï¼ˆé¡µç°å¡ç™½ã€1200px å®¹å™¨ã€å·¦å³ 32px å†…è¾¹è·ã€å…¨å±€ tokens å¯¹é½ï¼‰
> **ç”¨é€”**: å¿«é€Ÿå¯¼èˆªå’Œå®šä½é¡¹ç›®æ‰€æœ‰é‡è¦æ–‡ä»¶å’ŒåŠŸèƒ½

---

## ğŸ“š Memory Bank æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£ | ç”¨é€” | æ›´æ–°é¢‘ç‡ | å­—æ•° (ç²¾ç®€å) |
|------|------|------|------|
| [projectbrief.md](./projectbrief.md) | é¡¹ç›®æ¦‚è¿°å’Œå•†ä¸šç›®æ ‡ | ä½ | ~300 |
| [productContext.md](./productContext.md) | ç”¨æˆ·æ•…äº‹å’Œäº¤äº’æµç¨‹ | ä½ | ~200 |
| [techContext.md](./techContext.md) | æŠ€æœ¯æ ˆå’Œæ¶æ„è¯¦æƒ… | ä¸­ | ~500 |
| [systemPatterns.md](./systemPatterns.md) | è®¾è®¡æ¨¡å¼å’Œæœ€ä½³å®è·µ | ä¸­ | ~600 |
| [progress.md](./progress.md) | å¼€å‘è¿›å±•è®°å½• | é«˜ | ~800 |
| [activeContext.md](./activeContext.md) | å½“å‰ä»»åŠ¡å’Œç´§æ€¥äº‹é¡¹ | é«˜ | ~500 |

---

## ğŸ”¥ æ ¸å¿ƒæ€§èƒ½æ•°æ®

- **åˆ—è¡¨æ¸²æŸ“**: 0.5ç§’ (ä¼˜åŒ–å‰3ç§’ï¼Œæå‡83%)
- **APIå“åº”**: 0.4-0.5ç§’ (ä¼˜åŒ–å‰8-10ç§’ï¼Œæå‡20å€)
- **ç­›é€‰æŸ¥è¯¢**: 0.59ç§’ (ä¼˜åŒ–å‰2.2ç§’ï¼Œæå‡3.7å€)
- **DOMèŠ‚ç‚¹**: ~400ä¸ª (ä¼˜åŒ–å‰17ä¸‡+ï¼Œå‡å°‘99.8%)
- **å†…å­˜å ç”¨**: 50MB (ä¼˜åŒ–å‰400MBï¼Œå‡å°‘87.5%)
- **æ•°æ®è§„æ¨¡**: 3456æ¡æˆ¿æºï¼Œ98ä¸ªå”¯ä¸€åŒºåŸŸ

---

## ğŸ—ºï¸ é¡¹ç›®ç»“æ„å¯¼èˆª

### å‰ç«¯ (Vue 3 + Pinia + Vue Router)
```
src/
â”œâ”€â”€ views/                 # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ HomeView.vue      # é¦–é¡µ(æˆ¿æºåˆ—è¡¨)
â”‚   â”œâ”€â”€ PropertyDetail.vue # è¯¦æƒ…é¡µ
â”‚   â”œâ”€â”€ CommuteTimes.vue  # é€šå‹¤æŸ¥è¯¢ âœ¨
â”‚   â”œâ”€â”€ LoginView.vue     # è®¤è¯é¡µ
â”‚   â”œâ”€â”€ Favorites.vue     # æ”¶è—é¡µ
â”‚   â””â”€â”€ ProfileView.vue   # ä¸ªäººä¸­å¿ƒ
â”‚
â”œâ”€â”€ components/           # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ PropertyCard.vue      # æˆ¿æºå¡ç‰‡(580pxæ ‡å‡†)
â”‚   â”œâ”€â”€ VirtualPropertyList.vue # è™šæ‹Ÿæ»šåŠ¨ç»„ä»¶ âœ…å¯ç”¨
â”‚   â”œâ”€â”€ SearchBar.vue         # è‡ªåŠ¨è¡¥å…¨æœç´¢
â”‚   â”œâ”€â”€ FilterPanel.vue       # ç­›é€‰é¢æ¿(æŠ½å±‰å¼)
â”‚   â”œâ”€â”€ FilterTabs.vue        # å¿«é€Ÿç­›é€‰æ ‡ç­¾
â”‚   â”œâ”€â”€ Navigation.vue        # å“åº”å¼å¯¼èˆªæ 
â”‚   â””â”€â”€ commutes/             # é€šå‹¤ç›¸å…³ç»„ä»¶ âœ¨
â”‚
â”œâ”€â”€ stores/               # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ properties.js       # æˆ¿æºæ•°æ®(unified data)
â”‚   â”œâ”€â”€ auth.js            # ç”¨æˆ·è®¤è¯ä¸åœ°å€ âœ¨
â”‚   â””â”€â”€ commute.js         # é€šå‹¤è®¡ç®—ä¸ç¼“å­˜ âœ¨
â”‚
â”œâ”€â”€ services/api.js       # APIæœåŠ¡å±‚å°è£…
â””â”€â”€ router/index.js       # SPAè·¯ç”±é…ç½®
```

### åç«¯ (FastAPI + GraphQL)
```
â”œâ”€â”€ main.py               # APIç«¯ç‚¹å®šä¹‰ + æœåŠ¡å…¥å£
â”œâ”€â”€ db.py                 # Supabaseè¿æ¥æ± é…ç½®
â”œâ”€â”€ api/graphql_schema.py # GraphQLæŸ¥è¯¢æ”¯æŒ
â”œâ”€â”€ crud/                 # æ•°æ®è®¿é—®å±‚
â”œâ”€â”€ models/               # æ•°æ®æ¨¡å‹å®šä¹‰
â””â”€â”€ config/               # é…ç½®ç®¡ç†
```

---

## ğŸ”Œ æ ¸å¿ƒAPIç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ | ç¼“å­˜ç­–ç•¥ |
|------|------|------|------|
| `/api/properties` | GET | æˆ¿æºåˆ—è¡¨ + åˆ†é¡µ | æœåŠ¡ç«¯åˆ†é¡µ |
| `/api/properties/{id}` | GET | æˆ¿æºè¯¦æƒ… | 15åˆ†é’Ÿç¼“å­˜ |
| `/api/directions` | GET | Haversineé€šå‹¤è®¡ç®— | æœ¬åœ°ç®—æ³• |
| `/api/auth/register` | POST | ç”¨æˆ·æ³¨å†Œ | JWTä»¤ç‰Œ |
| `/api/user/addresses` | POST | åœ°å€æŒä¹…åŒ– | localStorage |
| `/graphql` | ALL | çµæ´»æ•°æ®æŸ¥è¯¢ | ä¸é€‚ç”¨äºAIå·¥å…· |
| `/api/cache/invalidate` | GET | ç¼“å­˜å¤±æ•ˆï¼ˆæµ‹è¯•/è°ƒè¯•ï¼‰ | æµ‹è¯•ç¯å¢ƒ |

**ç¦æ­¢** âŒ: å‰ç«¯è°ƒç”¨AIå·¥å…·çš„ExpressæœåŠ¡å™¨ (`localhost:3001`)

---

## âš¡ æœåŠ¡è¿è¡ŒçŠ¶æ€

- âœ… **Vueå‰ç«¯**: `http://localhost:5173` (è™šæ‹ŸDOM + å“åº”å¼)
- âœ… **Pythonåç«¯**: `http://localhost:8000` (FastAPI + GraphQL)
- âœ… æ•°æ®è§„æ¨¡: 3456æ¡æˆ¿æºæ•°æ®
- âœ… **4æ€§èƒ½ä¼˜åŒ–**: è™šæ‹Ÿæ»šåŠ¨ + APIç¼“å­˜ + æ•°æ®åº“ç´¢å¼•
- âœ… **5æœç´¢åŠŸèƒ½**: å…¨é‡æ•°æ®æœç´¢89å·ï¼Œç›¸é‚»åŒºåŸŸæ¨è
- âœ… **6ç­›é€‰ç³»ç»Ÿ**: å•é€‰é€»è¾‘ + æœåŠ¡ç«¯ç­›é€‰ + åŒºåŸŸè”åŠ¨
- âœ… **7è®¤è¯ç³»ç»Ÿ**: JWT + é‚®ç®±éªŒè¯ + æµ‹è¯•æ¨¡å¼æ”¯æŒ
- âœ… **8åœ°å›¾æœåŠ¡**: OpenStreetMapå…è´¹æ›¿ä»£ + æœ¬åœ°è®¡ç®—
- âœ… **9é€šå‹¤åŠŸèƒ½**: 15åˆ†é’Ÿç¼“å­˜ + æœ¬åœ°ç®—æ³• (æ— APIè´¹ç”¨)

---

## ğŸ”‘ æ•°æ®æ¨¡å‹æ¦‚è¦

### Propertyæ ¸å¿ƒå­—æ®µ
```javascript
{
  listing_id: Number,      // ä¸»é”®ID
  address: String,        // å®Œæ•´åœ°å€
  suburb: String,         // åŒºåŸŸåç§°
  rent_pw: Number,        // å‘¨ç§Ÿé‡‘
  bedrooms: Number,       // å§å®¤æ•°
  bathrooms: Number,      // æµ´å®¤æ•°
  available_date: Date,   // å…¥ä½æ—¥æœŸ
  images: Array,          // å›¾ç‰‡æ•°ç»„
  latitude: Number,       // GPSçº¬åº¦
  longitude: Number,      // GPSç»åº¦
  // + 8ä¸ªV4ç‰¹æ€§å­—æ®µ
}
```

---

## ğŸš¨ é«˜ä¼˜å…ˆçº§ä»»åŠ¡ (P0)

### ç«‹å³æ‰§è¡Œ
1. **æ¸…ç†è°ƒè¯•ä»£ç **: åˆ é™¤35ä¸ªconsole.logå½±å“ç”Ÿäº§å®‰å…¨
2. **Redisé™çº§ç­–ç•¥**: å®ç°è¿æ¥å¥åº·æ£€æŸ¥å’Œå†…å­˜å¤‡é€‰
3. **æ–‡æ¡£å®Œå–„**: ä¸ºè®¤è¯/æ”¶è—/é€šå‹¤åŠŸèƒ½è¡¥å……ä½¿ç”¨è¯´æ˜

### ä¸‹å‘¨å®Œæˆ
1. **æœç´¢å¢å¼º**: æ·»åŠ æœç´¢å†å²å’Œçƒ­é—¨æ¨èåŠŸèƒ½
2. **ç§»åŠ¨ç«¯UX**: ä¼˜åŒ–ç­›é€‰é¢æ¿å’Œå¯¼èˆªäº¤äº’ä½“éªŒ

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

```bash
# åç«¯å¯åŠ¨ (Python FastAPI)
python scripts/run_backend.py

# å‰ç«¯å¯åŠ¨ (Vue 3 + Vite)
cd vue-frontend && npm run dev

# çŠ¶æ€æ£€æŸ¥
curl http://localhost:5173/     # å‰ç«¯ç´¢å¼•é¡µ
curl http://localhost:8000/docs # APIæ–‡æ¡£é¡µ
```

---

## ğŸ› ï¸ å¼€å‘å·¥ä½œæµ

### å‰æœŸå‡†å¤‡
- å¯åŠ¨åç«¯æœåŠ¡ (`local-django :8000`)
- å¤„ç†å‰ç«¯ (`local-urban :5173`)
- æ£€æŸ¥Supabaseæ•°æ®åº“è¿æ¥

### åŠŸèƒ½å¼€å‘
- ä½¿ç”¨Pinia storeç®¡ç†çŠ¶æ€å˜åŒ–
- é€šè¿‡Vite proxy (`/api`) è°ƒç”¨åç«¯
- éµå¾ªå•ä¸€æ•°æ®æºåŸåˆ™å’Œç»„ä»¶èŒè´£åˆ†ç¦»

### æ€§èƒ½æµ‹è¯•
- ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨æŸ¥çœ‹é¡µé¢æ€§èƒ½
- æ£€æŸ¥ç½‘ç»œé¢æ¿çš„APIè¯·æ±‚æ—¶é—´
- éªŒè¯ç­›é€‰å’Œæœç´¢çš„å“åº”é€Ÿåº¦

---

## ğŸ” æ•…éšœæ’é™¤æŒ‡å—

| é—®é¢˜ç—‡çŠ¶ | å®šä½æ–‡ä»¶/ç»„ä»¶ | è§£å†³æ€è·¯ |
|----------|-------------|----------|
| æˆ¿æºåˆ—è¡¨ç©ºç™½ | `api.js`, `properties.js` | æ£€æŸ¥APIè°ƒç”¨å’Œæ•°æ®æ ¼å¼ |
| ç­›é€‰æ— æ•ˆ | `applyFilters()` action | ç¡®è®¤æœåŠ¡ç«¯ç­›é€‰å‚æ•° |
| è¯¦æƒ…é¡µæŠ¥é”™ | `PropertyDetail.vue` | æ£€æŸ¥IDç±»å‹è½¬æ¢å’Œå­—æ®µåç§° |
| é€šå‹¤åŠŸèƒ½å¤±è´¥ | `CommuteCalculator.vue` | éªŒè¯Google APIæ›¿ä»£æ–¹æ¡ˆ |
| å›¾ç‰‡ä¸æ˜¾ç¤º | `PropertyCard.vue` | æ£€æŸ¥imagesæ•°ç»„å¤„ç†é€»è¾‘ |
