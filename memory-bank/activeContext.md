# 当前上下文与紧急焦点

**最后更新**: 2025-09-08

---

## 今日快照（MB-ALIGN-SNAPSHOT）
- 2025-09-08｜UI-EP-SCROLL-NEUTRAL-1：完成“滚动指示器中性化”首轮落地（全局 + FilterPanel 定向覆盖），移除非CTA位置品牌色渗透，降低视觉噪声。
- 下一步：统一“滚动职责”以去除右缘多条滚动条（建议：锁定 body 滚动 + 仅保留面板主滚；内部长列表隐藏条形或并入主滚动）。等待方案选择（方案3：隐藏内条形；方案4：合并滚动职责）。
- Memory Bank 已对齐：根据你的确认，已从 progress.md 的“下一步规划”中移除“先选区域后筛选”条目（不再追踪，避免语义冲突）。
- 2025-09-08｜FILTER-DROPDOWNS-PC-V2：PC 端分离式筛选已落地（Chips 每项独立下拉，单例打开，点击外部/ESC 关闭）；Mobile 端保留统一 FilterPanel。HomeView 限制统一面板仅在移动端打开；Pinia 仍为单一真源，URL 同步保持不变。

## 进行中
- [P0/PC] “更多”面板（高级项）实现与收纳策略；保持 PC 分离式面板单例打开与点击外部/ESC 关闭。
- [P0/可达性] 下拉面板键盘可达性完善：初始焦点、Tab 循环、Esc 快速关闭；仅影响 PC 分离式，不改变 Mobile 统一面板行为。

## 下一步
- [P0/页面] 我的中心初步改造：收藏/历史两卡 + 统一卡片变体，先完成结构与样式基线。
- [P0/快修] 搜索条件保存与恢复：localStorage + URL 优先级策略。
- [P0/发布] MVP 部署上线：前后端流水线、环境变量、CORS、健康检查、README 指南。
- [P0/基础] 筛选 UI 升级：产出 1 页 RFC（触发/层级/分组折叠/清空&应用/键盘可达/空态/移动优先）。
- [P0/基础] Design Tokens 基线统一：focus/btn/input/icon/filter-chip，消除局部硬编码。

---

## 当前项目运行状态

### 服务状态
- ✅ Vue前端: `http://localhost:5173` - 虚拟DOM + 响应式系统
- ✅ Python后端: `http://localhost:8000` - FastAPI + GraphQL
- ✅ 数据库连接: 正常
- ✅ 后端API密钥: `GOOGLE_MAPS_API_KEY` 已在 `.env` 文件中正确配置 (2025-09-04)
- ✅ 通勤时间计算: P0/P1 修复已于 2025-09-04 验证通过，前端正确调用后端 API

---

## 当前无阻塞问题
所有核心功能均按预期运行。

---

## 下一步行动 (Next Action)
1. 用户筛选体验优化，参考 Zillow 的桌面 PC 端（按“筛选入口一致性 v2·PC”分步推进，可回滚）

---

## 开发提醒

### 代码质量
- 注释仅解释“为什么”，不写“做了什么”，避免与代码重复。
- 变更尽量最小化，遵循单一数据源，组件只触发 action，逻辑归 store。

### 文档与契约
- 任何架构/契约变更需在 Memory Bank 留痕；前端/后端端点字段保持“详情端点为列表端点超集”。

### 调试套件
- 终端：`curl` 校验后端端点与响应格式。
- 浏览器：Vue DevTools 检查 Pinia 状态与渲染路径；Network 面板核对筛选参数与耗时。
- 数据库：PostgreSQL 控制台/索引观测；必要时手动失效缓存（测试环境）。
