---
const title = 'Components Gallery (Astro)';
const desc = 'SRH Components Gallery with multiple states';

import '../../../../packages/ui/src/styles/tokens.css';
import '../../../../packages/ui/src/styles/tokens.dark.css';
---

<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={desc} />
    <style>
      :root {
        --fg: var(--color-text-primary);
        --muted: var(--color-text-secondary);
        --border: var(--color-border);
        --bg: var(--color-background-page);
        --accent: var(--color-primary);

        /* SRH variables (will be applied from /tokens/srh.json via JS) */
        --srh-color-text-primary: var(--color-text-primary);
        --srh-color-text-secondary: var(--color-text-secondary);
        --srh-card-bg: var(--color-background-surface);
        --srh-shadow-card: var(--shadow-md);

        --srh-space-md: 16px;
        --srh-radius-md: 8px;

        --srh-font-size-price: 20px;
        --srh-line-height-price: 28px;
        --srh-font-size-address: 16px;
        --srh-line-height-address: 24px;
        --srh-font-size-inspection: 14px;
        --srh-line-height-inspection: 20px;

        --srh-meta-gap: 8px;
        --srh-button-size: 40px;
        --srh-image-aspect: 0.75;

        /* Typography (defaults; will be overridden by JS) */
        --srh-font-family-zh: 'PingFang SC', 'Source Han Sans SC', 'Noto Sans SC', 'Microsoft YaHei', 'Heiti SC', sans-serif;
        --srh-font-family-en: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
        --srh-font-family-base: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'PingFang SC', 'Source Han Sans SC', 'Noto Sans SC', 'Microsoft YaHei', 'Heiti SC', sans-serif;

        --srh-font-weight-regular: 400;
        --srh-font-weight-medium: 500;
        --srh-font-weight-semibold: 600;
        --srh-font-weight-bold: 700;

        --srh-letter-spacing-tight: -0.2px;
        --srh-letter-spacing-normal: 0px;
        --srh-letter-spacing-wide: 0.2px;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: var(--srh-font-family-base);
        color: var(--fg);
        background: var(--bg);
        letter-spacing: var(--srh-letter-spacing-normal);
        font-weight: var(--srh-font-weight-regular);
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 24px 16px;
      }
      h1 { margin: 0 0 8px; font-size: 28px; }
      p.desc { color: var(--muted); margin: 0 0 20px; }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
        gap: 16px;
      }
      .section-title { margin-top: 24px; font-size: 18px; }

      .card {
        width: 360px;
        background: var(--srh-card-bg);
        padding: var(--srh-space-md);
        box-shadow: var(--srh-shadow-card);
        border-radius: var(--srh-radius-md);
      }
      .img {
        width: 100%; height: 0;
        padding-top: calc(var(--srh-image-aspect) * 100%);
        background: #eee; border-radius: 6px; margin-bottom: 12px;
        position: relative;
      }
      .badge {
        position: absolute; left: 8px; top: 8px;
        background: rgba(0,0,0,0.75); color: #fff;
        font-size: 12px; line-height: 20px; height: 20px;
        border-radius: 12px; padding: 0 8px;
      }
      .header { display: flex; align-items: center; justify-content: space-between; }
      .price {
        font-size: var(--srh-font-size-price);
        line-height: var(--srh-line-height-price);
        color: var(--srh-color-text-primary);
        font-weight: var(--srh-font-weight-semibold);
        letter-spacing: var(--srh-letter-spacing-tight);
      }
      .fav { width: var(--srh-button-size); height: var(--srh-button-size); border-radius: var(--srh-radius-md); background: #f5f5f5; color: #333;
        display: flex; align-items: center; justify-content: center; }
      .address {
        font-size: var(--srh-font-size-address);
        line-height: var(--srh-line-height-address);
        color: var(--srh-color-text-primary);
        margin-top: 8px;
        letter-spacing: var(--srh-letter-spacing-normal);
        font-weight: var(--srh-font-weight-regular);
      }
      .meta { display: flex; flex-direction: row; margin-top: 4px; }
      .meta-item { color: var(--srh-color-text-secondary); margin-right: var(--srh-meta-gap); }
      .meta-item:last-child { margin-right: 0; }
      .inspection {
        font-size: var(--srh-font-size-inspection);
        line-height: var(--srh-line-height-inspection);
        color: var(--srh-color-text-secondary);
        margin-top: 6px;
        letter-spacing: var(--srh-letter-spacing-wide);
        font-weight: var(--srh-font-weight-medium);
      }
    </style>
  </head>
  <body>
    <main class="container">
      <h1>Components</h1>
      <p class="desc">常见卡片状态对照，用于检查 token 对不同场景的适配性。</p>

      <div style="margin: 12px 0 16px;">
        <button class="btn" id="theme-toggle" type="button">切换暗色</button>
        <span style="margin-left: 8px; color: var(--muted); font-size: 13px;">当前主题通过 [data-theme] 控制</span>
      </div>

      <h2 class="section-title">标签状态（badges/labels）</h2>
      <div class="grid">
        <div class="card">
          <div class="img"></div>
          <div class="header">
            <div class="price">$800 pw</div>
            <div class="fav">♥</div>
          </div>
          <div class="address">12 Example St, Zetland NSW 2017</div>
          <div class="meta">
            <div class="meta-item">2 Bed</div>
            <div class="meta-item">2 Bath</div>
            <div class="meta-item">1 Car</div>
          </div>
          <div class="inspection">Inspection today 2:15pm</div>
        </div>

        <div class="card">
          <div class="img"><div class="badge">Inspection today 2:15pm</div></div>
          <div class="header">
            <div class="price">$820 pw</div>
            <div class="fav">♥</div>
          </div>
          <div class="address">15 Rosebery Ave, Rosebery NSW</div>
          <div class="meta">
            <div class="meta-item">2 Bed</div>
            <div class="meta-item">2 Bath</div>
            <div class="meta-item">1 Car</div>
          </div>
          <div class="inspection">Inspection today 4:30pm</div>
        </div>

        <div class="card">
          <div class="img"><div class="badge">Added yesterday</div></div>
          <div class="header">
            <div class="price">$690 pw</div>
            <div class="fav">♥</div>
          </div>
          <div class="address">1 Short St, Sydney NSW</div>
          <div class="meta">
            <div class="meta-item">1 Bed</div>
            <div class="meta-item">1 Bath</div>
          </div>
          <div class="inspection">Inspection today 1:00pm</div>
        </div>

        <div class="card">
          <div class="img"><div class="badge">Deposit taken</div></div>
          <div class="header">
            <div class="price">$980 pw</div>
            <div class="fav">♥</div>
          </div>
          <div class="address">Apt 9, 55 Example Ave, Zetland NSW 2017</div>
          <div class="meta">
            <div class="meta-item">3 Bed</div>
            <div class="meta-item">2 Bath</div>
            <div class="meta-item">2 Car</div>
            <div class="meta-item">Study</div>
          </div>
          <div class="inspection">Inspection today 11:20am</div>
        </div>

        <div class="card">
          <div class="img"><div class="badge">Build to Rent</div></div>
          <div class="header">
            <div class="price">$1,200 pw</div>
            <div class="fav">♥</div>
          </div>
          <div class="address">101/123-125 Very Long Address Road, Alexandria NSW 2015</div>
          <div class="meta">
            <div class="meta-item">2 Bed</div>
            <div class="meta-item">2 Bath</div>
            <div class="meta-item">1 Car</div>
          </div>
          <div class="inspection">Inspection today 3:05pm</div>
        </div>
      </div>

      <h2 class="section-title">说明</h2>
      <p class="desc">本页将默认从 /tokens/srh.json 读取 token 并应用到 CSS 变量，刷新即可看到最新值。</p>
    </main>

    <script>
      // No longer needed, styles are now inherited from theme via CSS variables.
    </script>
    <script>
      (function() {
        const root = document.documentElement;
        const key = 'srh-theme';
        const apply = (t) => {
          if (t === 'dark') root.setAttribute('data-theme', 'dark');
          else root.removeAttribute('data-theme');
          try { localStorage.setItem(key, t); } catch (e) {}
        };
        try {
          const saved = localStorage.getItem(key);
          if (saved) apply(saved);
          else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) apply('dark');
        } catch(e) {}
        const btn = document.getElementById('theme-toggle');
        if (btn) {
          const syncLabel = () => {
            const isDark = root.getAttribute('data-theme') === 'dark';
            btn.textContent = isDark ? '切换浅色' : '切换暗色';
          };
          btn.addEventListener('click', () => {
            const isDark = root.getAttribute('data-theme') === 'dark';
            apply(isDark ? 'light' : 'dark');
            syncLabel();
          });
          syncLabel();
        }
      })();
    </script>
  </body>
</html>
