# 📋 Sydney Rental Hub - TODO管理清单

> 最后更新：2025-01-30  
> 使用 Todo Tree 插件可在侧边栏查看所有 TODO/FIXME/HACK 标记

---

## 🔴 正在进行 (In Progress)

- [ ] **导航系统清理** @张三 #P0
  - [ ] 移除聊天链接
  - [ ] 保留地图链接（但标注"开发中"）
  - [ ] 统一桌面端和移动端导航

---

## 🟡 待办事项 (Todo)

### 高优先级 (P0) - 第一期核心功能

- [ ] **个人中心页面开发** #feature @2d
  - [ ] 我的收藏
  - [ ] 浏览历史
  - [ ] 搜索订阅管理
  - [ ] 通知设置

- [ ] **排序功能实现** #feature @4h
  - [ ] 价格排序（高到低/低到高）
  - [ ] 时间排序（最新/最旧）
  - [ ] 面积排序

- [ ] **搜索条件保存** #feature @1d
  - [ ] 保存当前搜索条件
  - [ ] 命名搜索条件
  - [ ] 快速应用已保存条件

### 中优先级 (P1) - 第一期增强功能

- [ ] **地图视图实现**（参考Zillow） #feature @1w
  - [ ] 集成地图组件
  - [ ] 房源位置标记
  - [ ] 框选区域搜索
  - [ ] 地图与列表切换

- [ ] **新房源自动提醒** #feature @3d
  - [ ] 后台任务扫描新房源
  - [ ] 匹配用户订阅条件
  - [ ] 邮件通知系统
  - [ ] 通知历史记录

- [ ] **收藏功能后端API** #feature @2d
  ```python
  # TODO [P1]: 实现 /api/favorites CRUD端点
  # 文件：backend/crud/favorites_crud.py
  # 需求：用户收藏列表持久化
  ```

- [ ] **通勤功能CRUD完善** #feature @3d
  ```python
  # TODO [P1]: 完成通勤地址的增删改查
  # 文件：backend/crud/commute_crud.py
  # 当前：框架已搭建，核心逻辑待实现
  ```

- [ ] **图片懒加载** #performance @4h
  ```javascript
  // TODO [P1]: 实现 v-lazy 指令或使用 vue-lazyload
  // 影响：首屏加载时间减少60%
  ```

### 低优先级 (P2) - 第二期规划

- [ ] **AI助手功能** #feature @2w
  - [ ] 自然语言搜索
  - [ ] 房源对比功能
  - [ ] 个性化推荐
  - [ ] 智能问答

- [ ] **GraphQL集成** #feature @2d
  ```javascript
  // TODO [P2]: 集成 Apollo Client 替代部分 REST API
  // 好处：减少过度获取，提升性能
  ```

- [ ] **PWA离线支持** #feature @1w
  ```javascript
  // TODO [P2]: 添加 Service Worker 实现离线浏览
  ```

- [ ] **单元测试** #quality @1w
  ```javascript
  // TODO [P2]: 使用 Vitest 添加组件测试
  // 目标覆盖率：80%
  ```

---

## 🐛 已知问题 (Bugs)

- [ ] **Domain.com.au部分图片404** #bug #已识别
  - 房源ID：9070832等
  - 影响：部分图片显示失败（不阻塞使用）
  - 原因：2024年6月的旧链接已失效
  - 可选方案：CDN代理 / 错误处理 / 本地缓存（待评估）

- [ ] **iOS Safari日期选择器** #bug #P1
  ```javascript
  // FIXME: iOS Safari 上日期选择器显示异常
  // 位置：FilterPanel.vue line 428-436
  // 临时方案：使用原生 input[type="date"]
  ```

- [ ] **移动端虚拟滚动性能** #bug #P2
  ```javascript
  // FIXME: 移动端快速滚动时偶尔白屏
  // 位置：VirtualPropertyList.vue
  // 可能原因：overscan 参数需要调整
  ```

---

## ✅ 已完成 (Done) - 2025年1月

### 2025-01-30
- [x] **启用虚拟滚动** ✅ @张三
  - DOM节点：17万+ → 400（减少99.8%）
  - 渲染时间：3秒 → 0.5秒（提升83%）
  - 内存占用：400MB → 50MB（减少87.5%）

- [x] **清理console.log** ✅ @张三
  - 清理41个调试语句
  - 保留错误处理相关的 console.error

- [x] **代码注释规范** ✅ @张三
  - 创建 CODE_COMMENT_RULES.md
  - 强制执行"只解释为什么"原则

### 2025-01-30 上午
- [x] **数据库索引优化** ✅ @张三
  - 查询速度：2.2秒 → 0.59秒（提升3.7倍）
  - 实现自动化索引创建

- [x] **代码健康检查** ✅ @张三
  - 生成 CODE_HEALTH_REPORT.md
  - 发现并记录所有技术债务

### 2025-01-29
- [x] **修复筛选功能** ✅
  - 多区域搜索
  - 筛选面板联动
  - 日期筛选逻辑

---

## 💡 优化想法 (Ideas/Backlog)

> 💭 讨论中产生的建议，需要评估后才决定是否实施

### 🔥 最优先评估项

- [ ] **UI一致性改进** #ux #critical @1w
  ```markdown
  // IDEA: 基于FRONTEND_STYLE_GUIDE.md统一所有组件样式
  // 问题：当前UI评分14/40，严重影响专业度
  // 影响：用户体验、品牌形象、开发效率
  // 建议：立即开始Phase 1改进（统一间距、颜色、字体）
  // 参考：UI_AUDIT_REPORT.md
  // 状态：强烈建议立即实施
  ```

### 近期讨论的方案

- [ ] **图片CDN代理** #performance @1h
  ```javascript
  // IDEA: 使用 images.weserv.nl 免费CDN代理Domain过期图片
  // 优点：免费、即时生效
  // 缺点：依赖第三方服务
  // 状态：待决策
  ```

- [ ] **图片错误处理优化** #bugfix @30min
  ```javascript
  // IDEA: 为所有图片添加 @error="handleImageError"
  // 可提供更好的用户体验
  // 状态：待评估影响范围
  ```

- [ ] **图片本地缓存系统** #performance
  ```python
  # IDEA: 下载并缓存Domain图片到本地/S3
  # 好处：永不失效，完全控制
  # 成本：约100GB存储
  # 状态：成本较高，待评估
  ```

### 其他想法

- [ ] **骨架屏Loading** #ux
  ```javascript
  // NOTE: 使用骨架屏替代传统loading spinner
  // 参考：vue-skeleton-webpack-plugin
  ```

- [ ] **暗黑模式** #ux
  ```javascript
  // NOTE: 添加深色主题支持
  // 使用 CSS 变量 + prefers-color-scheme
  ```

- [ ] **AI推荐系统** #feature
  ```python
  # NOTE: 基于用户浏览历史推荐房源
  # 技术栈：scikit-learn + 协同过滤
  ```

---

## 📊 进度统计

| 类别 | 总计 | 完成 | 进行中 | 待办 |
|------|------|------|--------|------|
| 功能开发 | 8 | 2 | 1 | 5 |
| Bug修复 | 3 | 0 | 0 | 3 |
| 性能优化 | 6 | 3 | 1 | 2 |
| 代码质量 | 4 | 2 | 0 | 2 |
| **总计** | **21** | **7 (33%)** | **2 (10%)** | **12 (57%)** |

---

## 🚀 本周冲刺计划 (Sprint Plan)

### Week of 2025-01-30 to 2025-02-05

**目标**：提升UI专业度 + 完成核心功能

1. **周一-周二**：UI一致性改进Phase 1
   - 统一间距系统（8px grid）
   - 修复颜色硬编码问题
   - 统一按钮和输入框样式

2. **周三-周四**：收藏功能后端API开发
   - 实现CRUD接口
   - 前端集成

3. **周五**：测试和优化
   - UI改进效果评估
   - 功能测试

**预期成果**：
- UI评分从14/40提升到20/40
- 收藏功能完整可用
- 用户体验明显改善

---

## 📝 备注

### TODO管理决策流程
```
1. 讨论阶段 → Ideas/Backlog（不设优先级）
2. 评估决策 → 确定是否实施
3. 计划排期 → 分配优先级（P0/P1/P2）
4. 开始执行 → 移到"正在进行"
5. 完成验证 → 移到"已完成"
```

### 优先级分配原则
- **P0**: 仅限阻塞性问题（系统崩溃、无法使用核心功能）
- **P1**: 已承诺的功能、影响用户体验的bug
- **P2**: 性能优化、代码质量改进
- **Ideas**: 所有讨论中的建议，未经决策不分配优先级

### 代码中的TODO标记规范
```javascript
// TODO [优先级] [负责人] [日期]: 描述
// FIXME: 需要修复的bug
// HACK: 临时解决方案
// NOTE: 重要说明
// OPTIMIZE: 性能优化点
// REVIEW: 需要代码审查
```

### 优先级定义
- **P0**: 阻塞性问题，立即处理
- **P1**: 重要功能，本周/本月完成
- **P2**: 改进项，有时间再做
- **P3**: 想法阶段，待评估

### 时间估算
- **@1h**: 1小时内完成
- **@4h**: 半天
- **@1d**: 1天
- **@2d**: 2天
- **@1w**: 1周

---

*使用 Todo Tree 插件可以在 VSCode 侧边栏实时查看所有 TODO 标记*