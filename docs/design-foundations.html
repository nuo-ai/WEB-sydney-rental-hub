<!DOCTYPE html>
<html>
<head>
<title>design-foundations.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="design-foundations%E4%B8%80%E9%A1%B5%E5%BC%8F%E5%9F%BA%E7%A1%80%E8%A7%84%E5%88%99%E8%A1%A8">Design Foundations（一页式基础规则表）</h1>
<p>目的</p>
<ul>
<li>提供“唯一真源”的基础设计规则，确保新组件/新页面的前端表现统一、可回滚、可审查。</li>
<li>所有变量均使用 CSS 自定义属性（tokens），禁止硬编码色值/散点尺寸。</li>
<li>变更策略：先“声明新令牌”再“渐进替换”，不破坏现有视觉与行为。</li>
</ul>
<p>文件总览（源码位置）</p>
<ul>
<li>全局令牌与规则：<code>apps/web/src/style.css</code></li>
<li>页面级令牌：<code>apps/web/src/styles/page-tokens.css</code></li>
<li>文字系统：<code>apps/web/src/styles/typography.css</code></li>
<li>颜色映射参考：<code>docs/color-token-mapping.md</code></li>
<li>系统模式与约束：<code>memory-bank/systemPatterns.md</code></li>
</ul>
<p>通用守护（必须遵守）</p>
<ul>
<li>stylelint 已启用：运行代码禁止 <code>#hex/rgb/命名色</code>，必须使用 <code>var(--*)</code></li>
<li>禁止 <code>var(--token, #hex)</code> 兜底（仅 tokens 定义入口可例外）</li>
<li>图标统一使用 <code>lucide-vue-next</code> + <code>currentColor</code>，严禁 <code>&lt;i&gt;</code>/位图</li>
</ul>
<hr>
<h2 id="1-%E9%A2%9C%E8%89%B2-color%E5%B7%B2%E5%BB%BA%E7%AB%8B">1. 颜色 Color（已建立）</h2>
<p>根令牌（摘录）</p>
<ul>
<li>文本：<code>--color-text-primary</code> / <code>--color-text-secondary</code></li>
<li>背景：<code>--color-bg-page</code> / <code>--color-bg-card</code> / <code>--surface-2/3/4</code></li>
<li>边框：<code>--color-border-default</code> / <code>--color-border-strong</code></li>
<li>品牌：<code>--juwo-primary</code>（蓝）<code>--link-color</code>（链接）及 brand 系列</li>
<li>状态（补充）：<code>--semantic-danger/*</code> <code>--semantic-warning/*</code> <code>--semantic-success</code> <code>--semantic-favorite/*</code></li>
</ul>
<p>前端表现</p>
<ul>
<li>页面灰、卡片白、中性灰分隔；品牌蓝仅用于 CTA/链接/少量强调；其它交互态全部走中性灰阶。</li>
</ul>
<hr>
<h2 id="2-%E5%AD%97%E4%BD%93%E4%B8%8E%E6%96%87%E5%AD%97-typography%E5%B7%B2%E5%BB%BA%E7%AB%8B">2. 字体与文字 Typography（已建立）</h2>
<p>来源</p>
<ul>
<li><code>styles/typography.css</code> 与 <code>.typo-*</code> 工具类；字号工具 <code>.text-xs/sm/base/lg</code> 对应 tokens。</li>
</ul>
<p>要点</p>
<ul>
<li>列表页 H1=22/26 与价格主数字对齐，段落/辅助文案与详情页一致。</li>
<li>中文化与 i18n：缺失 key 使用中文回退，禁止直出 key。</li>
</ul>
<hr>
<h2 id="3-%E9%97%B4%E8%B7%9D-spacing%E5%B7%B2%E5%BB%BA%E7%AB%8B">3. 间距 Spacing（已建立）</h2>
<p>令牌</p>
<ul>
<li>页面节奏：<code>--page-section-gap</code> / <code>--page-section-gap-lg</code></li>
<li>基础：<code>--space-*</code></li>
<li>规格行（spec）：<code>--spec-icon-size/text-size/line-height/icon-gap/item-gap</code></li>
</ul>
<p>前端表现</p>
<ul>
<li>列表/详情“图标 + 数字”行尺寸与横向间距完全一致（容器内就近覆写 18/14/18/6/12）。</li>
</ul>
<hr>
<h2 id="4-%E5%9C%86%E8%A7%92-radius%E5%88%BB%E5%BA%A6%E5%AF%B9%E5%A4%96%E5%A3%B0%E6%98%8E">4. 圆角 Radius（刻度对外声明）</h2>
<p>已有（全局）</p>
<ul>
<li><code>--radius-sm</code> / <code>--radius-md</code> / <code>--radius-lg</code> / <code>--radius-xl</code> / <code>--radius-full</code></li>
</ul>
<p>建议（使用范式）</p>
<ul>
<li>卡片/输入/按钮优先用 sm/md；连体（segmented）控件仅端部圆角（2px）。</li>
<li>禁止在组件内自创奇数值；统一来源 tokens。</li>
</ul>
<hr>
<h2 id="5-%E9%98%B4%E5%BD%B1-shadow%E5%88%BB%E5%BA%A6%E5%AF%B9%E5%A4%96%E5%A3%B0%E6%98%8E">5. 阴影 Shadow（刻度对外声明）</h2>
<p>已有（全局）</p>
<ul>
<li><code>--shadow-sm/md/lg/xl</code>（统一透明度/扩散）</li>
</ul>
<p>使用建议</p>
<ul>
<li>默认优先“边框 + 中性底”，必要时用 xs/sm/md，避免过度浮层。</li>
</ul>
<hr>
<h2 id="6-%E8%BE%B9%E6%A1%86-border%E5%88%BB%E5%BA%A6%E8%A1%A5%E5%85%85">6. 边框 Border（刻度补充）</h2>
<p>新增刻度（声明，不影响现有）</p>
<ul>
<li><code>--border-width-1: 1px</code></li>
<li><code>--border-width-2: 2px</code></li>
</ul>
<p>使用建议</p>
<ul>
<li>分隔/细线统一 1px；“强分隔/聚焦”使用 strong 颜色或 2px 加粗，不混用色值。</li>
</ul>
<hr>
<h2 id="7-%E5%B1%82%E7%BA%A7-z-index%E5%88%BB%E5%BA%A6%E8%A1%A5%E5%85%85">7. 层级 Z-index（刻度补充）</h2>
<p>新增刻度（声明，不影响现有）</p>
<ul>
<li><code>--z-search: 50</code></li>
<li><code>--z-nav: 60</code></li>
<li><code>--z-dropdown: 70</code></li>
<li><code>--z-modal: 100</code></li>
<li><code>--z-toast: 110</code></li>
</ul>
<p>使用建议</p>
<ul>
<li>浮层不再与导航/下拉抢层级；组件内统一引用上述令牌。</li>
</ul>
<hr>
<h2 id="8-%E5%9B%BE%E6%A0%87-icon%E5%88%BB%E5%BA%A6%E8%A1%A5%E5%85%85">8. 图标 Icon（刻度补充）</h2>
<p>新增刻度（声明，不影响现有）</p>
<ul>
<li><code>--icon-16</code> / <code>--icon-18</code> / <code>--icon-20</code> / <code>--icon-24</code></li>
</ul>
<p>使用建议</p>
<ul>
<li>BaseIconButton 默认 18px；导航/菜单 16px；统一比例不“忽大忽小”。</li>
</ul>
<hr>
<h2 id="9-%E7%84%A6%E7%82%B9-focus%E5%B7%B2%E5%BB%BA%E7%AB%8B">9. 焦点 Focus（已建立）</h2>
<p>令牌</p>
<ul>
<li><code>--focus-ring-color</code> / <code>--focus-ring-width</code> / <code>--focus-ring-offset</code></li>
</ul>
<p>策略</p>
<ul>
<li>输入类控件显示中性灰 ring；导航链接/标题动作/卡片图标按钮默认去 ring（可用 <code>.focus-visible-ring</code> 强制启用）。</li>
</ul>
<hr>
<h2 id="10-%E6%96%AD%E7%82%B9%E4%B8%8E%E5%AE%B9%E5%99%A8%E5%B7%B2%E5%BB%BA%E7%AB%8B">10. 断点与容器（已建立）</h2>
<p>断点</p>
<ul>
<li>768（平板）/ 1200（桌面）/ 1920（超宽）</li>
<li>容器 <code>max-width: 1200px</code>；左右 padding：Mobile 16 / Desktop 32</li>
</ul>
<hr>
<h2 id="11-%E8%A1%A8%E5%8D%95%E5%B0%BA%E5%AF%B8-scale%E5%88%BB%E5%BA%A6%E8%A1%A5%E5%85%85">11. 表单尺寸 Scale（刻度补充）</h2>
<p>建议（宣贯，不破坏现有）</p>
<ul>
<li>sm：高度 32px / 字号 13px</li>
<li>md：高度 36-40px / 字号 14-16px（iOS 防缩放 ≥16px）</li>
<li>筛选场景：pc 40px / mob 44px（已有 <code>--filter-field-*</code>）</li>
</ul>
<hr>
<h2 id="12-skeleton%E5%BB%BA%E8%AE%AE">12. Skeleton（建议）</h2>
<ul>
<li>统一骨架色与闪动动效；后续新增 <code>BaseSkeleton</code> 原子以替换散点实现。</li>
</ul>
<hr>
<h2 id="13-%E7%82%B9%E5%87%BB%E5%91%BD%E4%B8%AD%E5%8C%BA-hit-area%E5%B7%B2%E5%BB%BA%E7%AB%8B">13. 点击命中区 Hit Area（已建立）</h2>
<ul>
<li>BaseIconButton / BaseToggle：36–40px；移动端优先 40px</li>
</ul>
<hr>
<h2 id="14-%E8%BE%93%E5%85%A5%E5%90%8E%E7%BC%80%E5%AF%B9%E9%BD%90%E5%B7%B2%E5%BB%BA%E7%AB%8B">14. 输入后缀对齐（已建立）</h2>
<ul>
<li>规则：相对 <code>.el-input__wrapper</code> 定位，tokens <code>--search-suffix-right</code> / <code>--search-suffix-hit</code></li>
<li>避免以 <code>.el-input__suffix</code> 为锚点</li>
</ul>
<hr>
<h2 id="15-%E5%AF%BC%E8%88%AA%E4%BA%A4%E4%BA%92%E5%B7%B2%E5%BB%BA%E7%AB%8B">15. 导航交互（已建立）</h2>
<ul>
<li>hover：文字变品牌色，不加粗，不灰底</li>
<li>focus：移除默认外框，仅导航链接作用域生效</li>
</ul>
<hr>
<h2 id="16-%E5%AF%B9%E9%BD%90-alignment%E5%B7%B2%E5%BB%BA%E7%AB%8B">16. 对齐 Alignment（已建立）</h2>
<p>来源与令牌</p>
<ul>
<li>页面级（page-tokens.css）
<ul>
<li>左右留白：<code>--page-x-padding-mob: 16px</code>、<code>--page-x-padding-desktop: 32px</code></li>
<li>容器与区块：<code>--page-section-gap</code>、<code>--page-section-gap-lg</code></li>
<li>导航：<code>--nav-px-mob</code>、<code>--nav-px-desk</code>（与导航容器左右内边距一致）</li>
<li>卡片内容宽度（单列对齐场景）：<code>--card-content-w: 580px</code></li>
<li>其它：<code>--header-height</code>、<code>--bottom-nav-height</code>、<code>--scrollbar-w</code></li>
</ul>
</li>
<li>全局（style.css）
<ul>
<li>容器最大宽度：<code>max-width: 1200px</code>（所有页面主容器）</li>
<li>H1/工具条与卡片对齐示例：<code>.title-block .actions-row { width: var(--card-content-w); }</code></li>
</ul>
</li>
</ul>
<p>对齐规则（约定）</p>
<ul>
<li>容器
<ul>
<li>PC 主容器 <code>max-width: 1200px</code> 居中；Mobile/Pad 左右内边距：16px；Desktop 左右内边距：32px（取自 page tokens）</li>
</ul>
</li>
<li>内容对齐
<ul>
<li>单列卡片页面（如房源列表）：标题区的工具条/actions 与卡片内容宽度一致（用 <code>--card-content-w</code>）</li>
<li>左/右缘以“内容卡片”为锚：避免多处硬编码 453/496 类数值，统一以令牌/计算表达</li>
</ul>
</li>
<li>导航与搜索
<ul>
<li>导航左右 padding 使用 <code>--nav-px-*</code>；搜索容器内与页面容器保持一致，对齐到 16/32</li>
</ul>
</li>
<li>断点策略
<ul>
<li>断点：768/1200/1920（参考）；在断点内仅做小范围覆盖，避免“大改”导致体系分裂</li>
</ul>
</li>
</ul>
<p>用法示例</p>
<pre class="hljs"><code><div><span class="hljs-comment">/* 标题区操作行与卡片内容宽度对齐（PC） */</span>
<span class="hljs-keyword">@media</span> (width &gt;= <span class="hljs-number">1024px</span>) {
  <span class="hljs-selector-class">.title-block</span> <span class="hljs-selector-class">.actions-row</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">var</span>(--card-content-w);
  }
}

<span class="hljs-comment">/* 页面根容器左右留白（样板 .page 已内置） */</span>
<span class="hljs-selector-class">.page</span> {
  <span class="hljs-attribute">padding-left</span>: <span class="hljs-built_in">var</span>(--page-x-padding-mob);
  <span class="hljs-attribute">padding-right</span>: <span class="hljs-built_in">var</span>(--page-x-padding-mob);
}
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width:</span> <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-class">.page</span> {
    <span class="hljs-attribute">padding-left</span>: <span class="hljs-built_in">var</span>(--page-x-padding-desktop);
    <span class="hljs-attribute">padding-right</span>: <span class="hljs-built_in">var</span>(--page-x-padding-desktop);
  }
}
</div></code></pre>
<p>前端表现</p>
<ul>
<li>所有新页面/组件默认获得统一左右留白与区块节奏；列表页标题区/工具条与卡片内容区左缘严格对齐；导航与搜索区与页面水平节奏一致。</li>
</ul>
<hr>
<h2 id="%E6%89%A7%E8%A1%8C%E4%B8%8E%E5%AE%A1%E6%9F%A5">执行与审查</h2>
<p>落地检查清单（PR Review 必看）</p>
<ul>
<li><input type="checkbox" id="checkbox0"><label for="checkbox0">新/改样式是否全部使用 </label><code>var(--*)</code></li>
<li><input type="checkbox" id="checkbox1"><label for="checkbox1">是否复用 base 原子组件（BaseButton/BaseIconButton/BaseToggle/BaseChip/…）</label></li>
<li><input type="checkbox" id="checkbox2"><label for="checkbox2">是否引用页面级令牌（左右 16/32、节奏/动效）</label></li>
<li><input type="checkbox" id="checkbox3"><label for="checkbox3">图标是否使用 lucide + currentColor</label></li>
<li><input type="checkbox" id="checkbox4"><label for="checkbox4">断点/容器是否遵循 768/1200/1920 与 </label><code>max-width:1200</code></li>
</ul>
<p>渐进替换优先级</p>
<ul>
<li>P0：导航/卡片/按钮的散点尺寸 → 令牌化</li>
<li>P1：排序按钮 → BaseDropdownButton；照片计数/“New” → BasePillBadge；分隔线 → BaseDivider</li>
<li>P2：面包屑 → BaseBreadcrumb；规格 segmented → BaseSegmented；骨架 → BaseSkeleton</li>
</ul>
<p>变更策略（安全回滚）</p>
<ul>
<li>仅“声明新令牌”，不直接替换现有引用；待审查通过后分模块替换。</li>
<li>任何替换支持“删除或改回 token 引用”即可回滚；不影响逻辑与数据流。</li>
</ul>
<p>附录：当前令牌入口</p>
<ul>
<li><code>src/style.css</code>：根 tokens、系统护栏、全局工具类</li>
<li><code>src/styles/page-tokens.css</code>：页面级令牌（左右留白/区块节奏/动效）</li>
<li><code>src/styles/typography.css</code>：文字系统与 .typo-* 工具类</li>
</ul>

</body>
</html>
